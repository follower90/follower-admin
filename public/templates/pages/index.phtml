<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">Pages</h1>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<button class="btn btn-primary" onclick="location.href='/admin/page/new'">Add new page</button>
	</div>
</div>

<br/>
<div class="dataTable_wrapper">
	<div class="dataTables_wrapper">
		<div class="row">
			<div class="col-lg-12">
				<table class="table table-bordered dataTable">
					<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Url</th>
						<th>Active</th>
						<th width="130">Actions</th>
					</tr>
					</thead>
					<tbody>
					<?php
					foreach ($vars['pages'] as $row) {
						echo '
                        <tr>
                            <td>' . $row['id'] . '</td>
                            <td>' . $row['name'] . '</td>
                            <td>' . $row['url'] . '</td>
                            <td>' . \Admin\Snippet::active($row['id'], $row['active']) . '</td>
                            <td>' . \Admin\Snippet::actions($row['id'], ['duplicate', 'delete']) . '</td>
                        </tr>';
					}
					?>
					</tbody>
				</table>
			</div>
		</div>
		<?php echo $vars['paging']; ?>
	</div>
</div>

<script>
	$('.switcher').bootstrapSwitch({
		size: "mini",
		onSwitchChange: function (event, state) {
			$.ajax('/admin/api/Page.active', {
				method: 'post',
				data: {id: $(this).attr('data-id'), active: state ? 1 : 0}
			});
		}
	});

	$('#delete_item').on('click', function() {
		return confirm('Are you sure you want to delete this item?');
	});

	$('#duplicate_item').on('click', function() {
		return confirm('Are you sure you want to duplicate this item?');
	});
</script>
